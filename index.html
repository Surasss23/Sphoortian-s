<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spoortians</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <h1 class="title">Spoortians</h1>

        <!-- Notice Board -->
        <div class="notice-board">
            <p class="notice-title">Notice Board</p>
            <p id="notice-text" class="notice-text">Loading...</p>
        </div>

        <!-- Content Box -->
        <div class="content-box" id="content-box">
            <p>Loading content...</p>
        </div>
    </div>

    <script>
        const sheetID = "1ms6uBKR_OsQxW3bJTMIdPxRTQdUq1PrXtdbgJuGXLUY"; // Google Sheet ID
        const sheetURL = `https://docs.google.com/spreadsheets/d/${sheetID}/gviz/tq?tqx=out:json&tq=`;

        fetch(sheetURL)
            .then(res => res.text())
            .then(data => {
                const jsonData = JSON.parse(data.substring(47, data.length - 2)); // Parse Google Sheets JSON
                const rows = jsonData.table.rows;

                // ✅ Fix: Notice Board me sirf Notice (2nd Column ka data)
                if (rows.length > 0) {
                    const notice = rows[0].c[1]?.v || "No Notice Available"; // Notice Board Content (Column 2)
                    document.getElementById("notice-text").innerHTML = notice;
                }

                // ✅ Fix: Content Box me Title (Column 1) & Go Button me Link (Column 2)
                let contentHTML = "";
                for (let i = 1; i < rows.length; i++) { // Row 2 se start hoga (kyunki row 1 notice ke liye hai)
                    const title = rows[i].c[0]?.v || "No Title"; // Title (Column 1)
                    const link = rows[i].c[1]?.v || "#"; // Link (Column 2)

                    contentHTML += `
                        <div class="item">
                            <div class="text-box">
                                <p>${title}</p>
                            </div>
                            <a href="${link}" target="_blank" class="go-button">Go</a>
                        </div>
                    `;
                }
                
                // ✅ Agar koi content nahi toh fallback message
                document.getElementById("content-box").innerHTML = contentHTML || "<p>No content available</p>";
            })
            .catch(error => {
                console.error("Error loading data:", error);
                document.getElementById("notice-text").innerHTML = "Error loading notice";
                document.getElementById("content-box").innerHTML = "<p>Error loading content</p>";
            });
    </script>
</body>
</html>
